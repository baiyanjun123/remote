(function(){"use strict";var t={2904:function(t,e,n){var o=n(5130),i=n(6768),r=n(4232);const l={id:"app"},s=["value"],a={key:0,class:"popup"},u={id:"popup",class:"popup"},c={id:"popup-content",ref:"popupContent"};function p(t,e,n,p,d,h){return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>d.selectedTable=t),onChange:e[1]||(e[1]=(...t)=>h.fetchPoints&&h.fetchPoints(...t))},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(d.tables,((t,e)=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:t},(0,r.v_)(t),9,s)))),128))],544),[[o.u1,d.selectedTable]])]),e[6]||(e[6]=(0,i.Lk)("div",{id:"map"},null,-1)),d.selectedPoint?((0,i.uX)(),(0,i.CE)("div",a,[e[5]||(e[5]=(0,i.Lk)("h3",null,"点信息",-1)),(0,i.Lk)("p",null,[e[2]||(e[2]=(0,i.Lk)("strong",null,"经度:",-1)),(0,i.eW)(" "+(0,r.v_)(d.selectedPoint.longitude),1)]),(0,i.Lk)("p",null,[e[3]||(e[3]=(0,i.Lk)("strong",null,"纬度:",-1)),(0,i.eW)(" "+(0,r.v_)(d.selectedPoint.latitude),1)]),(0,i.Lk)("p",null,[e[4]||(e[4]=(0,i.Lk)("strong",null,"可信度:",-1)),(0,i.eW)(" "+(0,r.v_)(d.selectedPoint.Reliability),1)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",u,[(0,i.Lk)("div",c,null,512)])])}n(8111),n(116),n(7588),n(1701);var d=n(4373),h=(n(2488),n(9071)),f=n(8699),v=n(8047),g=n(1209),b=n(8225),m=n(856),w=n(1242),y=n(9073),k=n(6505),P=n(478),A=n(2239),L=n(5274),T=n(8343),O=n(5782),E={data(){return{tables:[],selectedTable:"",points:[],map:null,selectedPoint:null,vectorSource:null,vectorLayer:null,popup:null}},methods:{fetchTables(){d.A.get("http://localhost:8081/api/tables").then((t=>{this.tables=t.data.sort().reverse(),this.tables.length>0&&(this.selectedTable=this.tables[0],this.fetchPoints())})).catch((t=>{console.error("获取表名失败:",t)}))},fetchPoints(){this.selectedTable&&d.A.get(`http://localhost:8081/api/points/${this.selectedTable}`).then((t=>{this.points=t.data,this.addMarkersToMap(),this.updateMapView()})).catch((t=>{console.error("获取点数据失败:",t)}))},addMarkersToMap(){this.vectorSource.clear(),this.points.forEach((t=>{const e=new m.A({geometry:new b.A((0,A.Rb)([parseFloat(t.longitude),parseFloat(t.latitude)])),name:`Point at (${t.latitude}, ${t.longitude})`});e.setStyle(new k.Ay({image:new L.A({radius:4,fill:new T.A({color:"red"}),stroke:new O.A({color:"darkred",width:1})})})),this.vectorSource.addFeature(e)}))},updateMapView(){if(0===this.points.length)return;const t=this.points[0],e=(0,A.Rb)([parseFloat(t.longitude),parseFloat(t.latitude)]);this.map.getView().setCenter(e),this.map.getView().setZoom(6)},showPopup(t){const e=(0,A.Rb)([parseFloat(t.longitude),parseFloat(t.latitude)]);this.popup.setPosition(e);const n=`<div><strong>经度:</strong> ${t.longitude}<br><strong>纬度:</strong> ${t.latitude}<br><strong>可信度:</strong> ${t.Reliability}</div>`;this.$refs.popupContent.innerHTML=n}},mounted(){this.vectorSource=new y.A,this.vectorLayer=new w.A({source:this.vectorSource}),this.popup=new P.A({element:document.getElementById("popup"),positioning:"bottom-center",stopEvent:!1}),this.map=new h.A({target:"map",layers:[new v.A({source:new g.A}),this.vectorLayer],view:new f.Ay({center:[0,0],zoom:3}),overlays:[this.popup]}),this.map.on("click",(t=>{const e=this.map.getEventPixel(t.originalEvent),n=this.map.forEachFeatureAtPixel(e,(t=>t));if(n){const t=n.getGeometry().getCoordinates(),e=this.points.find((e=>{const n=(0,A.Rb)([parseFloat(e.longitude),parseFloat(e.latitude)]);return n[0]===t[0]&&n[1]===t[1]}));e&&(this.selectedPoint=e,this.showPopup(e))}})),this.fetchTables()}},F=n(1241);const C=(0,F.A)(E,[["render",p]]);var S=C;(0,o.Ef)(S).mount("#app")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,r){if(!o){var l=1/0;for(c=0;c<t.length;c++){o=t[c][0],i=t[c][1],r=t[c][2];for(var s=!0,a=0;a<o.length;a++)(!1&r||l>=r)&&Object.keys(n.O).every((function(t){return n.O[t](o[a])}))?o.splice(a--,1):(s=!1,r<l&&(l=r));if(s){t.splice(c--,1);var u=i();void 0!==u&&(e=u)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[o,i,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,r,l=o[0],s=o[1],a=o[2],u=0;if(l.some((function(e){return 0!==t[e]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(a)var c=a(n)}for(e&&e(o);u<l.length;u++)r=l[u],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(c)},o=self["webpackChunkremote"]=self["webpackChunkremote"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(2904)}));o=n.O(o)})();
//# sourceMappingURL=app.233edcb6.js.map